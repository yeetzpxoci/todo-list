(()=>{"use strict";function e(e){let t=JSON.parse(localStorage.getItem("currentProject"));for(let n=0;n<t.todos.length;n++)t.todos[n].title===e&&(t.todos.splice(n,1),localStorage.setItem("currentProject",JSON.stringify(t)));let n=JSON.parse(localStorage.getItem("projects"));for(let o=0;o<n.length;o++)if(n[o].name===t.name)for(let t=0;t<n[o].todos.length;t++)n[o].todos[t].title===e&&(n[o].todos.splice(t,1),localStorage.setItem("projects",JSON.stringify(n)))}function t(e){return{name:e,todos:[]}}function n(e){let t=JSON.parse(localStorage.getItem("projects"));for(let n=0;n<t.length;n++)t[n].name===e&&localStorage.setItem("currentProject",JSON.stringify(t[n]))}function o(){let e=JSON.parse(localStorage.getItem("projects"));for(let t=0;t<e.length;t++){const o=document.createElement("p");o.className="project-name",o.innerHTML=e[t].name,o.addEventListener("click",(function(){n(o.innerHTML),r(),c()})),document.getElementById("projects-div").append(o)}}function c(){let t=JSON.parse(localStorage.getItem("currentProject"));for(let n=0;n<t.todos.length;n++){const o=document.createElement("div");o.className="todo";const c=document.createElement("input");c.className="checkbox",c.type="checkbox",c.addEventListener("click",(function(){e(this.nextSibling.innerHTML),this.parentElement.remove()}));const r=document.createElement("p");r.innerHTML=t.todos[n].title,r.className="todo-name";const i=document.createElement("p");i.innerHTML=t.todos[n].dueDate,i.className="due";const l=document.createElement("p");l.id="description-text",l.innerHTML=t.todos[n].description;const d=document.createElement("button");d.id="close-button",d.innerHTML="X",d.addEventListener("click",(function(){this.parentElement.style.display="none"})),d.addEventListener("click",(function(){this.parentElement.style.display="none"}));const s=document.createElement("div");s.id="description-div",s.append(d,l);const a=document.createElement("button");a.innerHTML="Description",a.className="description",a.addEventListener("click",(function(){this.previousElementSibling.style.display="flex"})),o.append(c,r,i,s,a),document.getElementById("todos").append(o)}}function r(){document.getElementById("todos").innerHTML=""}null==JSON.parse(localStorage.getItem("projects"))&&function(){localStorage.setItem("projects",JSON.stringify([]));let e=t("Default");localStorage.setItem("defaultProject",JSON.stringify(e));let n=JSON.parse(localStorage.getItem("projects"));n.push(e),localStorage.setItem("projects",JSON.stringify(n)),localStorage.setItem("currentProject",JSON.stringify(e))}(),function(){const e=document.createElement("div");e.id="content";const n=document.createElement("div");n.id="header";const i=document.createElement("p");i.innerHTML="Todo",n.append(i);const l=document.createElement("div");l.id="sidebar";const d=document.createElement("div");d.id="projects-div";const s=document.createElement("button");s.id="add-project",s.innerHTML="New project",s.addEventListener("click",(function(){document.getElementById("new-project-form").style.display="flex"})),l.append(d,s);const a=document.createElement("div");a.id="todos-wrapper";const m=document.createElement("div");m.id="todos";const p=document.createElement("button");p.id="add-todo",p.innerHTML="Add todo",p.addEventListener("click",(function(){document.getElementById("new-todo-form").style.display="flex"})),a.append(m,p);const u=document.createElement("button");u.id="close-button",u.innerHTML="X",u.addEventListener("click",(function(){this.parentElement.style.display="none"}));const E=document.createElement("form");E.id="new-project-form",E.onsubmit=function(e){e.preventDefault()};const g=document.createElement("input");g.id="project-name-input",g.type="text",g.placeholder="Project name";const f=document.createElement("input");f.type="submit",f.value="Add project",f.addEventListener("click",(function(){!function(e){const n=t(document.getElementById("project-name-input").value);let o=JSON.parse(localStorage.getItem("projects"));o.push(n),localStorage.setItem("projects",JSON.stringify(o))}(),document.getElementById("projects-div").innerHTML="",o(),this.parentElement.style.display="none"})),E.append(u,g,f);const y=document.createElement("button");y.id="close-button",y.innerHTML="X",y.addEventListener("click",(function(){this.parentElement.style.display="none"}));const S=document.createElement("form");S.id="new-todo-form",S.onsubmit=function(e){e.preventDefault()};const v=document.createElement("input");v.id="todo-title-input",v.type="text",v.placeholder="Title";const j=document.createElement("input");j.id="todo-description-input",j.type="text",j.placeholder="Description";const h=document.createElement("input");h.id="todo-due-input",h.type="text",h.placeholder="Due date";const L=document.createElement("select");L.id="todo-priority-input",L.placeholder="Due date";const I=document.createElement("option");I.innerHTML="Low";const N=document.createElement("option");N.innerHTML="Medium";const J=document.createElement("option");J.innerHTML="High";const O=document.createElement("input");O.type="submit",O.value="Add todo",O.addEventListener("click",(function(){!function(e,t,n,o){const c=function(e,t,n,o){return{title:e,description:t,dueDate:n,priority:o}}(e,t,n,o);let r=JSON.parse(localStorage.getItem("currentProject"));r.todos.push(c),localStorage.setItem("currentProject",JSON.stringify(r));let i=JSON.parse(localStorage.getItem("projects"));for(let e=0;e<i.length;e++)i[e].name===r.name&&(i[e].todos.push(c),localStorage.setItem("projects",JSON.stringify(i)))}(v.value,j.value,h.value,L.value),this.parentElement.style.display="none",r(),c()})),L.append(J,N,I),S.append(y,v,j,h,L,O),e.append(n,l,a,E,S),document.body.appendChild(e)}(),o(),c()})();